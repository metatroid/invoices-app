%nav.aside
  %ul.sidebar
    %li
      %a{ng-class: "{active: $state.current.name === 'app'}", ui-sref: "app"}
        %span.fa.fa-tasks
    %li
      %a{ng-class: "{active: $state.current.name === 'app.settings'}", ui-sref: "app.settings"}
        %span.fa.fa-cog
    %li
      %a{href: "#"}
        %span.fa.fa-calendar
    %li
      %a{href: "#"}
        %span.fa.fa-code-fork
  .app-actions
    %a{ng-click: "showNewProjectForm($event)"}
      %span.fa.fa-plus-square
      New Project
%main.main-app#mainAppView
  %md-toolbar.top
    %nav.app-navigation{ui-view: "nav"}
  #app.view-panel{ng-class: "{active: currentState === 'app'}"}
    %md-content
      %md-list.project-list
        %md-list-item.project{ng-repeat: "project in projects", id: "project_{{project.id}}"}
          %md-fab-toolbar{md-open: "closed", md-direction: "left", count: "4"}
            %md-fab-trigger
              %md-button.md-fab{aria-label: "menu"}
                %md-icon
                  %span.fa.fa-cogs
            %md-toolbar
              %md-fab-actions.md-toolbar-tools
                %md-button.md-icon-button{aria-label: "remove", ng-click: "deleteProject($event, project.id, $index)"}
                  %span.fa.fa-remove
                %md-menu{md-position-mode: "target-right target"}
                  %md-button.md-icon-button{aria-label: "invoice", ng-click: "showInvoiceMenu($mdOpenMenu, $event)"}
                    %md-icon{md-menu-origin: true}
                      %span.fa.fa-list-alt
                  %md-menu-content{width: "2"}
                    %md-menu-item
                      %md-button{ng-click: "openInvoiceDialog(project.id, $event)"}
                        %md-icon{md-menu-align-target: true}
                          %span.fa.fa-magic
                        Generate invoice
                    %md-menu-item
                      %md-button
                        %md-icon
                          %span.fa.fa-download
                        Direct download
                    %md-menu-item
                      %md-button
                        %md-icon
                          %span.fa.fa-files-o
                        Past invoices

                %md-button.md-icon-button{aria-label: "intervals", ng-click: "showIntervalList($event, project.id, $index)"}
                  %span.fa.fa-clock-o
                %md-button.md-icon-button{aria-label: "settings"}
                  %span.fa.fa-cog
          %img.md-avatar{ng-src: "{{project.project_logo}}", alt: "{{project.project_name}}", ng-if: "project.project_logo"}
          %span.project-icon.fa.fa-folder{ng-if: "!project.project_logo"}
          .md-list-item-text.project-info-wrapper{layout: "column"}
            %h2
              {{project.project_name}}
            %h4
              {{project.client_name}}
            %ul.unstyled
              %li
                %strong
                  Rate: 
                {{project.hourly_rate | currency}}
              %li
                %strong
                  Time: 
                {{project.total_time | secondsToTimeString}}
              %li
                %strong
                  Balance: 
                {{project.balance | currency}}
          .md-list-item-text.timer-wrapper{layout: "column"}
            .timer
              %md-button.counter{incounting: true, data-project: "{{project.id}}"}
                00:00:00
              %a.timer-control.timer-pause{href: "#", ng-show: "intervals[project.id].timerRunning === true", intimer: "{{timeEvent}}", ng-click: "startstopTimer(project.id)", data-project: "{{project.id}}"}
                %span.fa.fa-pause
                pause
              %a.timer-control.timer-resume{href: "#", ng-show: "intervals[project.id].timerRunning !== true", intimer: "{{timeEvent}}", ng-click: "startstopTimer(project.id)", data-project: "{{project.id}}"}
                %span.fa.fa-play-circle
                start
              .interval-form-wrapper
                %form{ng-submit: "saveInterval(project.id, $index)"}
                  %md-content
                    %md-input-container
                      %label
                        Description
                      %input{ng-model: "intervalObj.description", required: "required"}
                    %md-button.md-raised.md-primary{type: "submit"}
                      save time interval
                    %md-button.md-raised{type: "button", ng-click: "discardInterval(project.id, $index)"}
                      discard
  #profile.view-panel{ng-class: "{active: currentState === 'app.settings'}"}
    %md-toolbar.md-default
      .md-toolbar-tools
        %h2.md-flex
          Profile Settings
    .form-wrapper.user-form-wrapper
      %form.form#userForm{ui-view: "profile"}